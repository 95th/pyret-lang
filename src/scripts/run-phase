#!/bin/sh

NODE="node -max-old-space-size=8192"

PHASE=`basename "$0"`
PYRET_JARR="build/$PHASE/pyret.jarr"
FILE=$1

if [ "$#" -ne 1 ]
then
    echo "Expecting 1 argument; received $#"
    echo "Usage: $PHASE file.arr"
    exit 1
fi

if [ ! -e $PYRET_JARR ]
then
    echo "missing pyret.jarr file. run: make $PHASE"
    exit 1
fi

if [ ! -e $FILE ]
then
    echo "Error: No such file: $FILE"
    exit 1
fi

$NODE $PYRET_JARR -no-display-progress --run "$@"
